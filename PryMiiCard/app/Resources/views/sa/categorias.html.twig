{% extends "::admin.html.twig" %}
{# {% block stylesheets %}<link href="{{ asset('css/menubar.css')}}" rel="stylesheet">{% endblock %} #}
{% block m2%}active {% endblock %}
{% block title %}Categorias{% endblock %}
{% block titulo %} Administracion de Categorias{%  endblock %}
{% block cuerpo %}
<div id="mensaje">
 	<p>{{ menssaje }}</p>
</div>
<div class ="row">
    <button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#FormNuevo"><span class="glyphicon glyphicon-edit" aria-hidden="true">   Nueva</span></button>
    <div class="modal fade" id="FormNuevo" tabindex="-1" role="dialog" aria-labelledby="FormNuevo">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true"><a href="{{ path('catgegoria_add') }}">&times;</a></span></button>
                    <h4 class="modal-title" id="FormNuevo">Nueva Categoría</h4>
                </div>
                {% if form is defined %}
                    {{ form_start(form) }}
                    {% form_theme form 'bootstrap_3_layout.html.twig' %}
                    <div class="modal-body">
                        {{ form_row(form.desCat) }}
                    </div>
                    <div class="modal-footer">
                        {{ form_row(form.Guardar) }}
                    </div>
                    {{ form_end(form) }}
                {% endif %}
            </div>
        </div>
    </div>
    {% if categoria != null%}
    <div class="modal fade" id="FormEdit" tabindex="-1" role="dialog" aria-labelledby="FormEdit" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <form>
                    <div class="modal-header">
                        <a class="close" href="{{ path('catgegoria_add') }}"><span aria-hidden="true">&times;</span></a>
                        <h4 class="modal-title" id="FormNuevo">Detalle Categoría</h4>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label for="exampleInputEmail1">codigo</label>
                            <input type="number" class="form-control" id="txtCodM" value="{{ categoria.id }}" disabled="true">
                        </div>
                        <div class="form-group">
                            <label for="exampleInputPassword1">Nombre</label>
                            <input type="text" class="form-control" id="txtNomM" value="{{ categoria.desCat }}">
                        </div>

                    </div>
                    <div class="modal-footer">
                        <a class="btn btn-default" href="{{ path('catgegoria_add') }}">Cerrar</a>
                        <button type="submit" class="btn btn-default">{#<a href="{{ path('pw_mc_main_catadd',{'descripcion':categoria}) }}">#}Editar{#</a>#}</button>
                        <button type="submit" class="btn btn-default">{#<a href="{{ path('pw_mc_main_catadd',{'descripcion':categoria}) }}">#}Eliminar{#</a>#}</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    {% endif %}
</div>

<div class="row">
	<h2>Lista de Categorias</h2>
    <div class="table-responsive">
        <table class="table table-striped">
            <tr>
                <th>Codigo</th>
                <th>Nombre</th>
                <th>Estado</th>
                <th>Cantidad de Promociones</th>
            </tr>form"=
            {%  for categoria in categorias %}
                <tr>
                    <td>{{ loop.index }}</td>
                    <td>{{ categoria.desCat }}</td>
                    <td>{% if categoria.estado == 1 %}Activo{% else %}Inactivo{% endif %}</td>
                    <td>{% if categoria.promociones is empty %}no hay promociones {% else %} si hya promociones {% endif %}</td>
                    {# <td>{% if categoria.promociones|length == 0 %} sin promociones {% else %} con promociones{% endif %}</td>#}
                    <td><a href="{{ path('get_Categoria',{'id':categoria.id}) }}">Selecionar</a></td>
                </tr>
            {% endfor %}
        </table>
    </div>
</div>

{% endblock %}
{% block javascripts %}
    {# <script src="{{ asset('js/menusidebar.min.js')}}"></script> #}
    {% if categoria != null %}
    <script>
        $('#FormEdit').modal('show')
    </script>
    {% endif %}
{% endblock %}